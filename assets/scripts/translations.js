const translation = {
  en: {
    navbar: {
      home: 'Home',
      feature: 'Feature',
      about: 'About Us',
      plans: 'Plans',
      testimonials: 'Testimonials',
      faq: 'FAQ',
      getstarted: 'Get started'
    },
    hero: {
      title: 'Welcome to Rutana',
      subtitle: '-Present by Qoritech-',
      description: 'Planing, delegating and report!\nOur platform helps your company with planing the best routes, simplify the rol assignment and get a full report of the whole situation.\nGet on the rode and make your company the fastest there is!',
      btnStart: 'Try free trial'
    },
    services: {
      title: 'Meet our value',
      subtitle: 'Take the stress out of your business',
      cards: {
        '1': {
          title: 'Smart Route Management',
          description: 'Optimize delivery routes in real-time using advanced algorithms that consider traffic, distance, and delivery priorities.'
        },
        '2': {
          title: 'Tracking',
          description: 'Real-time GPS tracking and monitoring of all your delivery vehicles and packages with live updates.'
        },
        '3': {
          title: 'Instant Communications',
          description: 'Seamless communication between drivers, dispatchers, and customers through our integrated messaging system.'
        }
      }
    },
    aboutUS: {
      title: 'About Us',
      cards: {
        help: {
          title: 'How We Help',
          text: 'We empower transport companies and drivers with a smart, easy-to-use platform that simplifies logistics, ensures real-time visibility, and improves communication with clients. Our app reduces inefficiencies, saves time, and builds trust through transparent operation'
        },
        mission: {
          title: "Mission & Vision",
          text: "Our mission is to simplify and optimize transportation by providing drivers and companies with efficient, transparent, and reliable digital tools. With the vision of becoming the leading transportation ecosystem in Latin America, we aim to connect people, businesses, and products through innovative, technology-driven solutions."
        },
        value: {
          title: "Value Proposition",
          text: "Our value lies in delivering smarter logistics, real-time visibility, and cost savings, while strengthening trust and efficiency across the entire supply chain. We help transporters and companies streamline their operations, reduce complexity, and ensure seamless communication with clients."
        }
      }
    },
    team: {
      title: "Our Team",
      description: "Learn more about our partners",
      role: '- Software Engineer -',
      julio: "Jesús Castillo",
      gabriela: "Yaku Guzmán",
      jahaziel: "Christopher Costa",
      williams: "Ingrid Medina",
      yaku: "Santiago Gordillo"
    },
    pLans: {
      title: "Choose Your Plan",
      description: "Rutana has the right plan for you.",
      cards: {
        free: {
          title: "Free",
          text: "$0/month",
          features: [
            "Limit 10 users",
            "Basic route management",
            "Real-time tracking",
            "Email support"
          ],
          btnstarted: 'Get started'
        },
        professional: {
          title: "Professional Plan",
          text: "$50/month",
          features: [
            "50 users available",
            "All features from Free Plan",
            "Detailed reports",
            "Priority customer support"
          ],
          btnstarted: 'Get started'
        },
        enterprise: {
          title: "Enterprise Plan",
          text: "Contact us",
          features: [
            "Users according to your needs",
            "All features",
            "Dedicated account manager",
            "Premium support"
          ],
          btnstarted: 'Get started'
        }
      }
    },
    testimonials: {
      title: 'Testimonials',
      description: 'Hear what our users say about how Restock has transformed their business, helping them manage inventory smarter and reach their goals with greater peace of mind and confidence.',
      cards: {
        '1': {
          comment: '"As a driver, I can focus on th road instead of worrying about planning. Everything is mapped out for me."',
          name: 'David R., Driver'
        },
        '2': {
          comment: '"Simple. smart, and efficient. Exactly what our transport business needed."',
          name: 'Emily P., Manager'
        }
      }
    },
    faq: {
      title: 'Frequently Asked Questions (FAQs)',
      subtitle: 'FAQ Forum',
      items: {
        '1': {
          question: 'What is Rutana?',
          answer: 'Rutana is a digital platform designed to help transportation companies and drivers manage routes, vehicles, and teams more efficiently. It simplifies daily operations by providing clear assignments, real-time updates, and a user-friendly interface.'
        },
        '2': {
          question: 'Who can benefit from using Rutana?',
          answer: 'Rutana is built for logistics companies, fleet managers, and transport operators who need to organize routes, assign vehicles and drivers, and keep track of operations with better visibility and control.'
        },
        '3': {
          question: 'Do I need technical knowledge to use Rutana?',
          answer: 'Not at all. Rutana is designed with simplicity in mind. The platform provides an intuitive dashboard where admins can set up teams and vehicles, while drivers can easily access their daily assignments.'
        },
        '4': {
          question: 'Can I use Rutana on mobile devices?',
          answer: "Yes. Rutana's landing page and web app are fully responsive, so you can access the platform on desktops, tablets, and smartphones without losing functionality."
        },
        '5': {
          question: 'How does Rutana help my business grow?',
          answer: 'By streamlining route planning, improving communication between admins and drivers, and keeping reliable historical records, Rutana reduces operational errors, saves time, and ensures that your logistics processes scale with your business needs.'
        }
      }
    },
    footer: {
      topLeftText: 'We make a better workspace around the world',
      sectionsTitle: 'Pages',
      sections: {
        home: 'Home',
        feature: 'Feature',
        about: 'About Us',
        plans: 'Plans',
        testimonials: 'Testimonials',
        faq: 'FAQ'
      },
      socialTitle: 'Social Networking',
      social: {
        facebook: '@Rutana',
        instagram: '@Rutana',
        twitter: '@Rutana',
        linkedin: '@Rutana'
      },
      bottom: {
        privacyPolicy: 'Privacy Policy',
        terms: 'Terms of Services',
        rights: '©2025 Qoritech LLC.'
      }
    }
  },

  es: {
    navbar: {
      home: 'Inicio',
      feature: 'Caracteristicas',
      about: 'Nosotros',
      plans: 'Planes',
      testimonials: 'Testimonios',
      faq: 'Preguntas',
      getstarted: 'Comenzar'
    },
    hero: {
      title: 'Bienvenido a Rutana',
      subtitle: '-Presentado por Qoritech-',
      description: '¡Planificación, delegación e informes!\nNuestra plataforma ayuda a tu empresa a planificar las mejores rutas, simplificar la asignación de roles y obtener un informe completo de toda la situación.\n¡Ponte en marcha y haz que tu empresa sea la más rápida!',
      btnStart: 'Prueba gratuita'
    },
    services: {
      title: 'Conoce nuestro valor',
      subtitle: 'Elimina el estrés de tu negocio',
      cards: {
        '1': {
          title: 'Gestión Inteligente de Rutas',
          description: 'Optimiza las rutas de entrega en tiempo real utilizando algoritmos avanzados que consideran el tráfico, la distancia y las prioridades de entrega.'
        },
        '2': {
          title: 'Seguimiento',
          description: 'Seguimiento y monitoreo GPS en tiempo real de todos tus vehículos de entrega y paquetes con actualizaciones en vivo.'
        },
        '3': {
          title: 'Comunicaciones Instantáneas',
          description: 'Comunicación fluida entre conductores, despachadores y clientes a través de nuestro sistema de mensajería integrado.'
        }
      }
    },
    aboutUS: {
      title: 'Sobre Nosotros',
      cards: {
        help: {
          title: 'Cómo Ayudamos',
          text: 'Empoderamos a las empresas de transporte y a los conductores con una plataforma inteligente y fácil de usar que simplifica la logística, garantiza visibilidad en tiempo real y mejora la comunicación con los clientes. Nuestra app reduce ineficiencias, ahorra tiempo y genera confianza mediante una operación transparente.'
        },
        mission: {
          title: "Misión & Visión",
          text: "Nuestra misión es simplificar y optimizar el transporte proporcionando a conductores y empresas herramientas digitales eficientes, transparentes y confiables. Con la visión de convertirnos en el ecosistema de transporte líder en Latinoamérica, buscamos conectar personas, negocios y productos mediante soluciones innovadoras impulsadas por la tecnología."
        },
        value: {
          title: "Propuesta de Valor",
          text: "Nuestro valor radica en ofrecer logística más inteligente, visibilidad en tiempo real y ahorro de costos, al mismo tiempo que fortalecemos la confianza y la eficiencia en toda la cadena de suministro. Ayudamos a transportistas y empresas a agilizar sus operaciones, reducir la complejidad y asegurar una comunicación fluida con los clientes."
        }
      }
    },
    team: {
      title: "Nuestro Equipo",
      description: "Conoce más sobre nuestros colaboradores",
      role: '- Ingeniero de Software -',
      julio: "Jesús Castillo",
      gabriela: "Yaku Guzmán",
      jahaziel: "Christopher Costa",
      williams: "Ingrid Medina",
      yaku: "Santiago Gordillo"
    },
    pLans: {
      title: "Elige Tu Plan",
      description: "Rutana tiene el plan adecuado para ti.",
      cards: {
        free: {
          title: "Gratis",
          text: "$0/mes",
          features: [
            "Límite de 10 usuarios",
            "Gestión básica de rutas",
            "Seguimiento en tiempo real",
            "Soporte por correo electrónico"
          ],
          btnstarted: 'Empezar'
        },
        professional: {
          title: "Plan Profesional",
          text: "$50/mes",
          features: [
            "50 usuarios disponibles",
            "Todas las funciones del Plan Gratis",
            "Reportes detallados",
            "Soporte prioritario al cliente"
          ],
          btnstarted: 'Empezar'
        },
        enterprise: {
          title: "Plan Empresarial",
          text: "Contáctanos",
          features: [
            "Usuarios según tus necesidades",
            "Todas las funciones",
            "Gerente de cuenta dedicado",
            "Soporte premium"
          ],
          btnstarted: 'Empezar'
        }
      }
    },
    testimonials: {
      title: 'Testimonios',
      description: 'Escucha lo que nuestros usuarios dicen sobre cómo Restock ha transformado su negocio, ayudándolos a gestionar el inventario de manera más inteligente y alcanzar sus objetivos con mayor tranquilidad y confianza.',
      cards: {
        '1': {
          comment: '"Como conductor, puedo concentrarme en la carretera en lugar de preocuparme por la planificación. Todo está mapeado para mí."',
          name: 'David R., Conductor'
        },
        '2': {
          comment: '"Simple, inteligente y eficiente. Exactamente lo que nuestro negocio de transporte necesitaba."',
          name: 'Emily P., Gerente'
        }
      }
    },
    faq: {
      title: 'Preguntas Frecuentes (FAQ)',
      subtitle: 'Foro de Preguntas',
      items: {
        '1': {
          question: '¿Qué es Rutana?',
          answer: 'Rutana es una plataforma digital diseñada para ayudar a las empresas de transporte y conductores a gestionar rutas, vehículos y equipos de manera más eficiente. Simplifica las operaciones diarias proporcionando asignaciones claras, actualizaciones en tiempo real y una interfaz fácil de usar.'
        },
        '2': {
          question: '¿Quién puede beneficiarse de usar Rutana?',
          answer: 'Rutana está diseñada para empresas de logística, gerentes de flota y operadores de transporte que necesitan organizar rutas, asignar vehículos y conductores, y mantener un seguimiento de las operaciones con mejor visibilidad y control.'
        },
        '3': {
          question: '¿Necesito conocimientos técnicos para usar Rutana?',
          answer: 'Para nada. Rutana está diseñada pensando en la simplicidad. La plataforma proporciona un panel intuitivo donde los administradores pueden configurar equipos y vehículos, mientras que los conductores pueden acceder fácilmente a sus asignaciones diarias.'
        },
        '4': {
          question: '¿Puedo usar Rutana en dispositivos móviles?',
          answer: 'Sí. La página de inicio y la aplicación web de Rutana son completamente responsivas, por lo que puedes acceder a la plataforma en computadoras de escritorio, tabletas y smartphones sin perder funcionalidad.'
        },
        '5': {
          question: '¿Cómo ayuda Rutana a hacer crecer mi negocio?',
          answer: 'Al optimizar la planificación de rutas, mejorar la comunicación entre administradores y conductores, y mantener registros históricos confiables, Rutana reduce errores operacionales, ahorra tiempo y asegura que tus procesos logísticos escalen con las necesidades de tu negocio.'
        }
      }
    },
    footer: {
      topLeftText: 'Creamos mejores espacios de trabajo alrededor del mundo',
      sectionsTitle: 'Páginas',
      sections: {
        home: 'Inicio',
        feature: 'Funcionalidades',
        about: 'Sobre Nosotros',
        plans: 'Planes',
        testimonials: 'Testimonios',
        faq: 'Preguntas Frecuentes'
      },
      socialTitle: 'Redes Sociales',
      social: {
        facebook: '@Rutana',
        instagram: '@Rutana',
        twitter: '@Rutana',
        linkedin: '@Rutana'
      },
      bottom: {
        privacyPolicy: 'Política de Privacidad',
        terms: 'Términos de Servicio',
        rights: '©2025 Qoritech LLC.'
      }
    }
  }
};

// --- util: obtener traducción usando claves anidadas como "feature.cards.free.title"
function getNestedTranslation(obj, key) {
  if (!obj || !key) return undefined;
  return key.split('.').reduce((acc, k) => (acc !== undefined ? acc[k] : undefined), obj);
}


// --- convierte arrays y objetos en contenido legible en el DOM
function applyTranslationToElement(el, value) {
  if (value === undefined || value === null) return;
  // arrays -> si es UL/OL, renderizamos <li>, si no, los unimos por coma
  if (Array.isArray(value)) {
    if (el.tagName === 'UL' || el.tagName === 'OL') {
      el.innerHTML = value.map(item => `<li>${item}</li>`).join('');
    } else {
      el.textContent = value.join(', ');
    }
    return;
  }

  // objetos -> preferimos mostrar .title o .text si existen
  if (typeof value === 'object') {
    if (value.title) el.textContent = value.title;
    else if (value.text) el.textContent = value.text;
    else el.textContent = JSON.stringify(value);
    return;
  }

  // strings / numbers
  el.textContent = value;
}


// --- función principal de traducción
let currentLang = 'en';

function translatePage(lang) {
  const root = translation[lang];
  if (!root) { console.warn('Language not found:', lang); return; }

  document.querySelectorAll('[data-i18n]').forEach((el) => {
    const key = el.getAttribute('data-i18n'); // e.g. "plans.cards.free.features"
    const value = getNestedTranslation(root, key);
    if (value !== undefined) {
      // si es input con placeholder
      if ((el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') && el.placeholder !== undefined) {
        el.placeholder = typeof value === 'string' ? value : String(value);
      } else {
        applyTranslationToElement(el, value);
      }
    }
  });

  document.documentElement.lang = lang;
  console.log('Language switched to', lang);
}


// --- evento del botón
document.addEventListener('DOMContentLoaded', () => {
  const langBtn = document.getElementById('langBtn');
  if (langBtn) {
    langBtn.addEventListener('click', () => {
      currentLang = currentLang === 'en' ? 'es' : 'en';
      translatePage(currentLang);
    });
  }

  // traducir al cargar
  translatePage(currentLang);
});